# get-payslip

[とあるページ](https://kyuyokaitori.com/481)のコンテンツをダウンロードするツール


## 準備

* Firefoxが必要です。
* Selenium serverが必要です。[ここ](https://www.selenium.dev/downloads/)からダウンロードしてください。
* `stack build`してビルドしてください。

## 実行

* `java -jar selenium-server-x.x.x.jar standalone`
    * 下とは別窓で実行してください。Selenium Serverが起動します。デフォルトのポート番号4444にかぶりがないようにしてください。

* `GET_PAYSLIP_PASSWORD=xxxxxxx stack exec -- get-payslip-exe`
    * カレントディレクトリに`yyyy/MM/`ディレクトリが（なければ）作成され、そこにコンテンツ(zipファイル）がダウンロードされます。
        * ディレクトリ名は、コンテンツのダウンロードURLの一部から採られています。実行日ではありません。
        * 同じ名前のコンテンツがある場合は、単純に上書きされます。
    * 先頭の環境変数はパスワードです。個々人で入手してください。

## 機能追加（できたらいいな）

* [ ] ダウンロード済みコンテンツがあるときに、同じコンテンツをダウンロードしない
* [ ] 定期実行させる
* [ ] 失敗したらメール等で通知する
* [ ] ダウンロードしたコンテンツにわかりやすい名前をつける
* [ ] コンテンツの保存場所を任意に指定する
* [ ] Selenium Serverも合わせて実行されるようにする（上げ忘れ防止）
* [ ] パスワード入力するだけなので、WebDriverを使うのはやり過ぎか？単品で実行できるようにする
